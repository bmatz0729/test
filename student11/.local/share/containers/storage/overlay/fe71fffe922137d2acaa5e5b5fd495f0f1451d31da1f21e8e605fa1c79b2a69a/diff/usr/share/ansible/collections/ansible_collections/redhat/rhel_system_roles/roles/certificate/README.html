<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.10" />
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_certificate_system_role">Certificate System Role</h2>
<div class="sectionbody">
<div class="paragraph"><p><span class="image">
<img src="https://github.com/linux-system-roles/certificate/workflows/tox/badge.svg" alt="CI Testing" />
</span></p></div>
<div class="paragraph"><p>Role for managing TLS/SSL certificate issuance and renewal</p></div>
<div class="paragraph"><p>Linux system role to issue and renew SSL certificates.</p></div>
<div class="paragraph"><p>Basic usage:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver

  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
<div class="paragraph"><p>On a RPM-based system this will place the certificate in
<code>/etc/pki/tls/certs/mycert.crt</code> and the key in
<code>/etc/pki/tls/private/mycert.key</code>.</p></div>
<div class="sect2">
<h3 id="_variables">Variables</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="65%" />
<col width="3%" />
<col width="5%" />
<col width="11%" />
<thead>
<tr>
<th align="left" valign="top">Parameter </th>
<th align="left" valign="top">Description </th>
<th align="center" valign="top">Type </th>
<th align="center" valign="top">Required </th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">certificate_wait</p></td>
<td align="left" valign="top"><p class="table">If the task should wait for the certificate to be
issued.</p></td>
<td align="center" valign="top"><p class="table">bool</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">certificate_requests</p></td>
<td align="left" valign="top"><p class="table">A list of dicts representing each certificate to
be issued. See <a href="#certificate_requests">certificate_requests</a>.</p></td>
<td align="center" valign="top"><p class="table">list</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_certificate_requests">certificate_requests</h4>
<div class="paragraph"><p><strong>Note:</strong> Fields such as <code>common_name</code>, <code>country</code>, <code>state</code>, <code>locality</code>,
<code>organization</code>, <code>organizational_unit</code>, <code>email</code>, <code>key_usage</code>, and
<code>extended_key_usage</code> that can be included in the certificate request are
defined by the RFC 5280.</p></div>
<div class="paragraph"><p><strong>Note:</strong> Be aware that the CA might not honor all the requested fields.
For example, even if a request include <code>country: US</code>, the CA might issue
the certificate without <code>country</code> in it&#8217;s subject.</p></div>
<div class="paragraph"><p><strong>Note:</strong> The fields <code>dns</code>, <code>email</code> and <code>ip</code> are used to define the
Subject Alternative Names (SAN).</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="58%" />
<col width="7%" />
<col width="5%" />
<col width="14%" />
<thead>
<tr>
<th align="left" valign="top">Parameter </th>
<th align="left" valign="top">Description </th>
<th align="center" valign="top">Type </th>
<th align="center" valign="top">Required </th>
<th align="left" valign="top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">name</p></td>
<td align="left" valign="top"><p class="table">Name of the certificate. A full path can be used to choose the
directory where files will be stored.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">yes</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ca</p></td>
<td align="left" valign="top"><p class="table">CA that will issue the certificate. See <a href="#cas-and-providers">CAs
and Providers</a>.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">yes</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">dns</p></td>
<td align="left" valign="top"><p class="table">Domain (or list of domains) to be included in the certificate.
Also can provide the default value for <a href="#common_name">common_name</a>.</p></td>
<td align="center" valign="top"><p class="table">str or list</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">email</p></td>
<td align="left" valign="top"><p class="table">Email (or list of emails) to be included in the certificate.</p></td>
<td align="center" valign="top"><p class="table">str or list</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ip</p></td>
<td align="left" valign="top"><p class="table">IP, or list of IPs, to be included in the certificate. IPs can be
IPv4, IPv6 or both. Also can provide the default value for
<a href="#common_name">common_name</a>.</p></td>
<td align="center" valign="top"><p class="table">str or list</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">auto_renew</p></td>
<td align="left" valign="top"><p class="table">Indicates if the certificate should be renewed
automatically before it expires.</p></td>
<td align="center" valign="top"><p class="table">bool</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">yes</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">owner</p></td>
<td align="left" valign="top"><p class="table">User name (or user id) for the certificate and key files.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table"><em>User running Ansible</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">group</p></td>
<td align="left" valign="top"><p class="table">Group name (or group id) for the certificate and key files.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table"><em>Group running Ansible</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">key_size</p></td>
<td align="left" valign="top"><p class="table">Generate keys with a specific keysize in bits.</p></td>
<td align="center" valign="top"><p class="table">int</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">2048
- See <a href="#key_size">key_size</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">common_name</p></td>
<td align="left" valign="top"><p class="table">Common Name requested for the certificate subject.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">See <a href="#common_name">common_name</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">country</p></td>
<td align="left" valign="top"><p class="table">Country code requested for the certificate subject.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">state</p></td>
<td align="left" valign="top"><p class="table">State requested for the certificate subject.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">locality</p></td>
<td align="left" valign="top"><p class="table">Locality requested for the certificate subject (usually
city).</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">organization</p></td>
<td align="left" valign="top"><p class="table">Organization requested for the certificate subject.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">organizational_unit</p></td>
<td align="left" valign="top"><p class="table">Organizational unit requested for the certificate
subject.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">contact_email</p></td>
<td align="left" valign="top"><p class="table">Contact email requested for the certificate subject.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">key_usage</p></td>
<td align="left" valign="top"><p class="table">Allowed Key Usage for the certificate. For valid values see:
<a href="#key_usage">key_usage</a>.</p></td>
<td align="center" valign="top"><p class="table">list</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">See <a href="#key_usage">key_usage</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">extended_key_usage</p></td>
<td align="left" valign="top"><p class="table">Extended Key Usage attributes to be present in the
certificate request.</p></td>
<td align="center" valign="top"><p class="table">list</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">See
<a href="#extended_key_usage">extended_key_usage</a></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">run_before</p></td>
<td align="left" valign="top"><p class="table">Command that should run before saving the certificate. See
<a href="#run-hooks">run hooks</a>.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">run_after</p></td>
<td align="left" valign="top"><p class="table">Command that should run after saving the certificate. See
<a href="#run-hooks">run hooks</a>.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">principal</p></td>
<td align="left" valign="top"><p class="table">Kerberos principal.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table">-</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">provider</p></td>
<td align="left" valign="top"><p class="table">The underlying method used to request and manage the
certificate.</p></td>
<td align="center" valign="top"><p class="table">str</p></td>
<td align="center" valign="top"><p class="table">no</p></td>
<td align="left" valign="top"><p class="table"><em>Varies by CA</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_common_name">common_name</h4>
<div class="paragraph"><p>If <code>common_name</code> is not set the role will attempt to use the first value
of <code>dns</code> or <code>ip</code>, respectively, as the default. If <code>dns</code> and <code>ip</code> are
also not set, <code>common_name</code> will not be included in the certificate.</p></div>
</div>
<div class="sect3">
<h4 id="_key_size">key_size</h4>
<div class="paragraph"><p>Recommended minimal-values for a certificate key size, from different
organizations, vary across time. In the attempt to provide safe
settings, the default minimal-value for <code>key_size</code> will be increased
over time.</p></div>
<div class="paragraph"><p>If you want your certificates to always keep the same <code>key_size</code> when
renewed, set this variable to the desired value.</p></div>
</div>
<div class="sect3">
<h4 id="_key_usage">key_usage</h4>
<div class="paragraph"><p>Valid values for <code>key_usage</code> are:</p></div>
<div class="ulist"><ul>
<li>
<p>
digitalSignature
</p>
</li>
<li>
<p>
nonRepudiation
</p>
</li>
<li>
<p>
keyEncipherment
</p>
</li>
<li>
<p>
dataEncipherment
</p>
</li>
<li>
<p>
keyAgreement
</p>
</li>
<li>
<p>
keyCertSign
</p>
</li>
<li>
<p>
cRLSign
</p>
</li>
<li>
<p>
encipherOnly
</p>
</li>
<li>
<p>
decipherOnly
</p>
</li>
</ul></div>
<div class="paragraph"><p>The defaults for <code>key_usage</code> are:</p></div>
<div class="ulist"><ul>
<li>
<p>
digitalSignature
</p>
</li>
<li>
<p>
keyEncipherment
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_extended_key_usage">extended_key_usage</h4>
<div class="paragraph"><p>Any valid oid can be used to set one or more <code>extended_key_usage</code>. In
addition to that there is also a list of known aliases that will be
recognized by the role:</p></div>
<div class="ulist"><ul>
<li>
<p>
id-kp-serverAuth
</p>
</li>
<li>
<p>
id-kp-clientAuth
</p>
</li>
<li>
<p>
id-kp-codeSigning
</p>
</li>
<li>
<p>
id-kp-emailProtection
</p>
</li>
<li>
<p>
id-kp-timeStamping
</p>
</li>
<li>
<p>
id-kp-OCSPSigning
</p>
</li>
<li>
<p>
id-kp-ipsecEndSystem
</p>
</li>
<li>
<p>
id-kp-ipsecTunnel
</p>
</li>
<li>
<p>
id-kp-ipsecUser
</p>
</li>
</ul></div>
<div class="paragraph"><p>If <code>extended_key_usage</code> is not set the role will default to:</p></div>
<div class="ulist"><ul>
<li>
<p>
id-kp-serverAuth
</p>
</li>
<li>
<p>
id-kp-clientAuth
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_run_hooks">run hooks</h4>
<div class="paragraph"><p>Sometimes you need to execute a command just before a certificate is
renewed and another command just after. In order to do that use
<code>run_before</code> and <code>run_after</code>.</p></div>
<div class="paragraph"><p>The value provided to <code>run_before</code> and <code>run_after</code> will be wrapped and
stored in shell script files that later will be executed by the
provider.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_cas_and_providers">CAs and Providers</h3>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="16%" />
<col width="10%" />
<col width="37%" />
<col width="37%" />
<thead>
<tr>
<th align="left" valign="top">CA </th>
<th align="left" valign="top">Providers </th>
<th align="left" valign="top">CA description </th>
<th align="left" valign="top">Requirements</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left" valign="top"><p class="table">self-sign</p></td>
<td align="left" valign="top"><p class="table">certmonger*</p></td>
<td align="left" valign="top"><p class="table">Issue self-signed certificates from a local CA.</p></td>
<td align="left" valign="top"><p class="table"></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">ipa</p></td>
<td align="left" valign="top"><p class="table">certmonger*</p></td>
<td align="left" valign="top"><p class="table">Issue certificates using the FreeIPA CA.</p></td>
<td align="left" valign="top"><p class="table">Host needs
to be enrolled in a FreeIPA server.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="paragraph"><p><em>* Default provider.</em></p></div>
<div class="paragraph"><p>CA represents the CA certificates that will be used to issue and sign
the requested certificate. Provider represents the method used to send
the certificate request to the CA and then retrieve the signed
certificate.</p></div>
<div class="paragraph"><p>If a user chooses <code>self-sign</code> CA, with <code>certmonger</code> as provider and,
later on decide to change the provider to <code>openssl</code>, the CA certificates
used in both cases needs to be the same. <em>Please note that <code>openssl</code> is
<strong>not yet a supported</strong> provider and it&#8217;s only mentioned here as an
example.</em></p></div>
<div class="sect3">
<h4 id="_certmonger_and_selinux">Certmonger and SELinux</h4>
<div class="paragraph"><p>If SELinux is enforced, the <code>certmonger</code> service is only able to write
or edit files in directories where the <code>cert_t</code> context is present.</p></div>
<div class="paragraph"><p>Additionally to that, if the scripts executed by <code>run_before</code> and
<code>run_after</code> parameters need to write or edit files, those scripts also
require the <code>cert_t</code> context to be present prior to the role execution.</p></div>
<div class="paragraph"><p>You can use
<a href="https://github.com/linux-system-roles/selinux">linux-system-roles/selinux</a>
to manage SELinux contexts.</p></div>
<div class="paragraph"><p>For more information about <code>certmonger</code> and SELinux requirements, see
<a href="https://linux.die.net/man/8/certmonger_selinux">certmonger_selinux(8) man
pages</a>.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_examples">Examples:</h3>
<div class="sect3">
<h4 id="_issuing_a_self_signed_certificate">Issuing a self-signed certificate:</h4>
<div class="paragraph"><p>Issue a certificate for <code>*.example.com</code> and place it in the standard
directory for the distribution.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver

  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> <span style="color:#000000">*</span>.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
<div class="paragraph"><p>You can find the directories for each distribution in the following
locations:</p></div>
<div class="ulist"><ul>
<li>
<p>
Debian/Ubuntu:
</p>
<div class="ulist"><ul>
<li>
<p>
Certificates: <code>/etc/ssl/localcerts/certs/</code>
</p>
</li>
<li>
<p>
Keys: <code>/etc/ssl/localcerts/private/</code>
</p>
</li>
</ul></div>
</li>
<li>
<p>
RHEL/CentOS/Fedora:
</p>
<div class="ulist"><ul>
<li>
<p>
Certificates: <code>/etc/pki/tls/certs/</code>
</p>
</li>
<li>
<p>
Keys: <code>/etc/pki/tls/private/</code>
</p>
</li>
</ul></div>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_choosing_where_to_place_the_certificates">Choosing where to place the certificates</h4>
<div class="paragraph"><p>Issue a certificate and key and place them in the specified location.
The example below creates a certificate file in
<code>/another/path/mycert.crt</code> and a key file in <code>/another/path/mycert.key</code>.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> /another/path/mycert
        <span style="color:#000000; font-weight:bold">dns:</span> <span style="color:#000000">*</span>.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_issuing_certificates_with_multiple_dns_ip_and_email">Issuing certificates with multiple DNS, IP and Email</h4>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span>
          - www.example.com
          - sub<span style="color:#b07e00">1</span>.example.com
          - sub<span style="color:#b07e00">2</span>.example.com
          - sub<span style="color:#b07e00">3</span>.example.com
        <span style="color:#000000; font-weight:bold">ip:</span>
          - <span style="color:#b07e00">192.0.2.12</span>
          - <span style="color:#b07e00">198.51.100.65</span>
          - <span style="color:#b07e00">2001</span>:db<span style="color:#b07e00">8</span>::<span style="color:#b07e00">2</span>:<span style="color:#b07e00">1</span>
        <span style="color:#000000; font-weight:bold">email:</span>
          - sysadmin&#64;example.com
          - support&#64;example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_setting_common_subject_options">Setting common subject options</h4>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">common_name:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">country:</span> US
        <span style="color:#000000; font-weight:bold">state:</span> NY
        <span style="color:#000000; font-weight:bold">locality:</span> New York
        <span style="color:#000000; font-weight:bold">organization:</span> Red Hat
        <span style="color:#000000; font-weight:bold">organizational_unit:</span> platform
        <span style="color:#000000; font-weight:bold">email:</span> admin&#64;example.com
  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_setting_the_certificate_key_size">Setting the certificate key size</h4>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">key_size:</span> <span style="color:#b07e00">4096</span>
  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_setting_the_key_usage_and_extended_key_usage_eku">Setting the "Key Usage" and "Extended Key Usage" (EKU)</h4>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">key_usage:</span>
          - digitalSignature
          - nonRepudiation
          - keyEncipherment
        <span style="color:#000000; font-weight:bold">extended_key_usage:</span>
          - id-kp-clientAuth
          - id-kp-serverAuth
  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_don_8217_t_wait_for_the_certificate_to_be_issued">Don&#8217;t wait for the certificate to be issued</h4>
<div class="paragraph"><p>The certificate issuance can take several minutes depending on the CA.
Because of that it&#8217;s also possible to request the certificate but not
actually wait for it.</p></div>
<div class="paragraph"><p>This configuration affects all certificates: if <code>certificate_wait</code> is
set to <code>no</code> the role does not wait for any certificate to be issued.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_wait:</span> false
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_setting_a_principal">Setting a principal</h4>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">principal:</span> HTTP/www.example.com&#64;EXAMPLE.COM

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_choosing_to_not_auto_renew_a_certificate">Choosing to not auto-renew a certificate</h4>
<div class="paragraph"><p>By default certificates generated by the role are set for auto-renewal.
To disable that behavior set <code>auto_renew: no</code>.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">auto_renew:</span> no

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_using_freeipa_to_issue_a_certificate">Using FreeIPA to issue a certificate</h4>
<div class="paragraph"><p>If your host is enrolled in a FreeIPA server, you also have the option
to use it&#8217;s CA to issue your certificate. To do that, set <code>ca: ipa</code>.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">principal:</span> HTTP/www.example.com&#64;EXAMPLE.COM
        <span style="color:#000000; font-weight:bold">ca:</span> ipa

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_running_a_command_before_or_after_a_certificate_is_issued">Running a command before or after a certificate is issued</h4>
<div class="paragraph"><p>Sometimes you need to execute a command just before a certificate is
renewed and another command just after. To do so, use <code>run_before</code> and
<code>run_after</code>.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">run_before:</span> systemctl stop webserver.<span style="color:#000000; font-weight:bold">service</span>
        <span style="color:#000000; font-weight:bold">run_after:</span> systemctl start webserver.<span style="color:#000000; font-weight:bold">service</span>

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_setting_the_certificate_owner_and_group">Setting the certificate owner and group</h4>
<div class="paragraph"><p>If you are using a certificate for a service, for example httpd, you
need to set the certificate owner and group that will own the
certificate. In the following example the owner and group are both set
to httpd.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>---
- <span style="color:#000000; font-weight:bold">hosts:</span> webserver
  <span style="color:#000000; font-weight:bold">vars:</span>
    <span style="color:#000000; font-weight:bold">certificate_requests:</span>
      - <span style="color:#000000; font-weight:bold">name:</span> mycert
        <span style="color:#000000; font-weight:bold">dns:</span> www.example.com
        <span style="color:#000000; font-weight:bold">ca:</span> self-sign
        <span style="color:#000000; font-weight:bold">owner:</span> httpd
        <span style="color:#000000; font-weight:bold">group:</span> httpd

  <span style="color:#000000; font-weight:bold">roles:</span>
    - redhat.rhel_system_roles.certificate</code></pre>
</div></div>
<div class="paragraph"><p>Note that you can also use UID and GID instead of user and group names.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_compatibility">Compatibility</h3>
<div class="paragraph"><p>Currently supports CentOS 7+, RHEL 7+, Fedora. It has been tested with
Debian 10.</p></div>
</div>
<div class="sect2">
<h3 id="_dependencies">Dependencies</h3>
<div class="paragraph"><p>None.</p></div>
</div>
<div class="sect2">
<h3 id="_license">License</h3>
<div class="paragraph"><p>MIT</p></div>
</div>
<div class="sect2">
<h3 id="_author_information">Author Information</h3>
<div class="paragraph"><p>Sergio Oliveira Campos (@seocam)</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
</div>
</body>
</html>
